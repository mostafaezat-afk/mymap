<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=3.0"/>
  <title>ğŸ” Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø®Ø¯Ù…Ø§Øª - Ø¨Ø´ØªÙŠÙ„</title>
  <meta name="theme-color" content="#2196f3">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://maps.googleapis.com">
  <link rel="dns-prefetch" href="https://script.google.com">
  
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet"/>
  
  <script>
    const CONFIG = {
      WEB_APP_URL: 'https://script.google.com/macros/s/AKfycbyVW8NG--5KGo9i9ho3aT1t6zPt9dB1aBKaJbkb8q0yFP5BKiK2Koke4tDjezL3Oo9D/exec',
      GOOGLE_MAPS_API_KEY: 'AIzaSyBT2qu6ecTsP-5xCs6lKuj_OO4UtqOFaJ8'
    };
    
    function goToRegistration() {
      window.location.href = 'https://mostafaezat-afk.github.io/mymap/re.html';
    }
    
    function goToSearch() {
      resetSearch();
    }
  </script>
  
  <style>
    :root{--primary:#2196f3;--primary-light:#42a5f5;--primary-dark:#1976d2;--secondary:#4caf50;--accent:#f44336;--success:#26c281;--background:#f5f8fa;--card-bg:#ffffff;--text-primary:#1a1a2e;--text-secondary:#6c757d;--border:#e1e8ed}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}html,body{width:100%;height:100%;margin:0;padding:0}body{font-family:'Tajawal',sans-serif;background:var(--background);color:var(--text-primary);line-height:1.6;min-height:100vh;overflow-x:hidden}.splash-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#2196f3 0%,#1976d2 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99999;transition:opacity 0.3s}.splash-screen.hidden{opacity:0;pointer-events:none}.splash-logo{font-size:8rem;animation:bounce 1s infinite}.splash-text{color:white;font-size:3rem;font-weight:800;margin-top:2rem;text-align:center;padding:0 2rem}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}.mobile-view{width:100%;min-height:100vh;padding:0;margin:0;display:none}.mobile-view.active{display:block}.mobile-header{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);padding:3rem 2rem;text-align:center;color:white;box-shadow:0 4px 15px rgba(0,0,0,0.1);width:100%;position:sticky;top:0;z-index:100;margin:0;overflow:hidden}.mobile-header h1{font-size:4.5rem;font-weight:800;margin:0 0 1rem 0;letter-spacing:-0.02em;line-height:1.2}.mobile-header-buttons{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap;margin-top:2rem}.mobile-btn-header{padding:2rem 3rem;border-radius:25px;text-decoration:none;font-size:2.5rem;font-weight:700;color:white;border:none;cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,0.3);display:inline-flex;align-items:center;justify-content:center;gap:1rem;transition:transform 0.2s;font-family:'Tajawal',sans-serif}.mobile-btn-header:active{transform:scale(0.95)}.mobile-btn-register{background:linear-gradient(135deg,var(--secondary) 0%,#388e3c 100%)}.mobile-btn-search{background:linear-gradient(135deg,#f44336 0%,#d32f2f 100%)}.mobile-content{width:100%;padding:0;margin:0;background:var(--background);padding-bottom:3rem}.mobile-section{padding:2rem 2rem;background:var(--card-bg);border-bottom:4px solid #f0f0f0;margin:0}.mobile-section:first-child{padding-top:2rem;margin-top:0}.mobile-section-title{display:flex;align-items:center;gap:2rem;font-size:3rem;font-weight:700;color:var(--primary);margin-bottom:2.5rem;justify-content:center}.mobile-icon{width:100px;height:100px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:3.5rem;flex-shrink:0}.mobile-info-text{font-size:2.8rem;color:var(--text-secondary);text-align:center;margin-bottom:2rem;font-weight:600}.mobile-filter-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:2rem;margin:2rem 0}@media (max-width:900px){.mobile-filter-grid{grid-template-columns:repeat(3,1fr)}}@media (max-width:600px){.mobile-filter-grid{grid-template-columns:repeat(2,1fr)}}.mobile-filter-card{border:5px solid var(--border);border-radius:28px;padding:2.5rem 1.5rem;text-align:center;background:var(--background);cursor:pointer;transition:all 0.3s ease;min-height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}.mobile-filter-card:active{transform:scale(0.92)}.mobile-filter-card.selected{border-color:var(--primary);background:white;box-shadow:0 12px 40px rgba(33,150,243,0.35)}.mobile-filter-icon{font-size:4rem;line-height:1}.mobile-filter-label{font-size:2rem;font-weight:700;line-height:1.1;color:var(--text-primary)}.mobile-activity-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin:2rem 0}.mobile-activity-card{border:5px solid var(--border);border-radius:20px;padding:2rem 1rem;text-align:center;background:var(--background);cursor:pointer;transition:all 0.3s ease;min-height:150px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.8rem}.mobile-activity-card:active{transform:scale(0.92)}.mobile-activity-icon{font-size:4rem}.mobile-activity-label{font-size:1.8rem;font-weight:600;line-height:1.1;color:var(--text-primary)}.mobile-results-container{padding:3rem 2rem;background:var(--background)}.mobile-result-card{background:white;border-radius:28px;padding:3rem 2.5rem;margin-bottom:3rem;box-shadow:0 12px 40px rgba(0,0,0,0.12);text-align:right;border-right:10px solid var(--secondary)}.mobile-result-title{font-size:3.5rem;font-weight:800;color:var(--primary);margin-bottom:2rem}.mobile-result-info{font-size:2.8rem;color:var(--text-primary);margin:1.5rem 0;font-weight:600;line-height:1.6}.mobile-result-info a{color:var(--primary);text-decoration:none;font-weight:700}.mobile-map-btn{width:100%;padding:3rem;background:linear-gradient(135deg,var(--secondary) 0%,#388e3c 100%);color:white;border:none;border-radius:24px;font-size:3rem;font-weight:700;cursor:pointer;font-family:'Tajawal',sans-serif;margin-top:2rem;transition:all 0.3s ease;box-shadow:0 12px 40px rgba(76,175,80,0.45)}.mobile-map-btn:active{transform:scale(0.94)}.mobile-loading,.mobile-error,.mobile-no-results{font-size:3.5rem;text-align:center;padding:5rem 3rem;font-weight:700}.mobile-loading{color:var(--primary)}.mobile-error{background:#ffebee;color:var(--accent);border-radius:28px;margin:3rem 2rem}.mobile-no-results{color:var(--text-secondary)}.mobile-fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;background:white;display:none}.mobile-fullscreen.active{display:block}.mobile-fullscreen-map{width:100%;height:100%}.mobile-close-btn{position:fixed;top:3rem;right:3rem;background:var(--accent);color:white;border:none;padding:2.5rem 3.5rem;border-radius:25px;font-size:3rem;font-weight:800;cursor:pointer;z-index:99999;box-shadow:0 8px 30px rgba(0,0,0,0.4);font-family:'Tajawal',sans-serif}.mobile-close-btn:active{transform:scale(0.95)}.desktop-view{display:none;background:var(--background);min-height:100vh;padding:2rem}.desktop-view.active{display:block}.desktop-container{max-width:1400px;margin:0 auto}.desktop-header{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);padding:2.5rem 2rem;text-align:center;color:white;border-radius:24px;margin-bottom:2.5rem;box-shadow:0 12px 40px rgba(0,0,0,0.15);overflow:hidden}.desktop-header h1{font-size:2.5rem;font-weight:800;margin:0 0 1.5rem 0}.desktop-header-buttons{display:flex;gap:1.5rem;justify-content:center}.desktop-btn-header{padding:1rem 2rem;border-radius:16px;text-decoration:none;font-size:1.1rem;font-weight:700;color:white;border:none;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 15px rgba(0,0,0,0.2);font-family:'Tajawal',sans-serif}.desktop-btn-header:hover{transform:translateY(-2px)}.desktop-btn-register{background:linear-gradient(135deg,var(--secondary) 0%,#388e3c 100%)}.desktop-btn-search{background:linear-gradient(135deg,#f44336 0%,#d32f2f 100%)}.desktop-content{display:grid;grid-template-columns:1fr 650px;gap:2.5rem}.desktop-main{background:white;padding:2.5rem;border-radius:24px;box-shadow:0 12px 40px rgba(0,0,0,0.1)}.desktop-section{margin-bottom:2.5rem}.desktop-section:last-child{margin-bottom:0}.desktop-section-title{font-size:1.5rem;font-weight:700;color:var(--primary);margin-bottom:1.8rem;padding-bottom:1.2rem;border-bottom:3px solid var(--border);display:flex;align-items:center;gap:1rem}.desktop-icon{width:50px;height:50px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.desktop-info-text{font-size:1.1rem;color:var(--text-secondary);text-align:center;margin-bottom:1.5rem;font-weight:600}.desktop-filter-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.2rem}.desktop-filter-card{border:3px solid var(--border);border-radius:18px;padding:1.5rem 1rem;text-align:center;background:var(--background);cursor:pointer;transition:all 0.3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.5rem;min-height:110px}.desktop-filter-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(33,150,243,0.2)}.desktop-filter-card.selected{border-color:var(--primary);background:white;box-shadow:0 8px 25px rgba(33,150,243,0.3)}.desktop-filter-icon{font-size:2rem}.desktop-filter-label{font-size:0.95rem;font-weight:700;color:var(--text-primary)}.desktop-activity-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}.desktop-activity-card{border:3px solid var(--border);border-radius:14px;padding:1.2rem 0.8rem;text-align:center;background:var(--background);cursor:pointer;transition:all 0.3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.4rem;min-height:95px}.desktop-activity-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(33,150,243,0.2)}.desktop-activity-icon{font-size:2rem}.desktop-activity-label{font-size:0.85rem;font-weight:600;color:var(--text-primary);line-height:1.1}.desktop-results-container{margin-top:2rem}.desktop-result-card{background:white;border-radius:18px;padding:2rem;margin-bottom:1.5rem;box-shadow:0 6px 20px rgba(0,0,0,0.08);text-align:right;border-right:6px solid var(--secondary);transition:all 0.3s}.desktop-result-card:hover{transform:translateX(-5px);box-shadow:0 8px 30px rgba(0,0,0,0.12)}.desktop-result-title{font-size:1.5rem;font-weight:700;color:var(--primary);margin-bottom:1rem}.desktop-result-info{font-size:1rem;color:var(--text-primary);margin:0.6rem 0;font-weight:600}.desktop-result-info a{color:var(--primary);text-decoration:none;font-weight:700}.desktop-map-btn{width:100%;padding:1rem;background:linear-gradient(135deg,var(--secondary) 0%,#388e3c 100%);color:white;border:none;border-radius:12px;font-size:1rem;font-weight:700;cursor:pointer;margin-top:1rem;font-family:'Tajawal',sans-serif;transition:all 0.3s}.desktop-map-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(76,175,80,0.3)}.desktop-sidebar{display:flex;flex-direction:column;gap:2rem}.desktop-map-box{background:white;padding:1.5rem;border-radius:24px;box-shadow:0 12px 40px rgba(0,0,0,0.1);position:sticky;top:2rem}.desktop-map-box h3{font-size:1.3rem;color:var(--primary);margin-bottom:1.2rem;display:flex;align-items:center;gap:0.8rem}.desktop-map-container{position:relative;width:100%;height:700px;border-radius:16px;overflow:hidden;background:#e0e0e0}#desktopMap{width:100%;height:100%}#mobileMap{width:100%;height:100%}.desktop-loading,.desktop-error,.desktop-no-results{font-size:1.3rem;text-align:center;padding:3rem 2rem;font-weight:700}.desktop-loading{color:var(--primary)}.desktop-error{background:#ffebee;color:var(--accent);border-radius:16px;margin:2rem 0}.desktop-no-results{color:var(--text-secondary)}@media (max-width:1024px){.desktop-content{grid-template-columns:1fr}.desktop-map-box{position:relative;top:0}}.hidden{display:none!important}.gm-style div[style*="color: rgb(255, 255, 255)"]{text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000,-2px 0 0 #000,2px 0 0 #000,0 -2px 0 #000,0 2px 0 #000 !important}
  </style>
</head>
<body>
  <div class="splash-screen" id="splashScreen">
    <div class="splash-logo">ğŸ”</div>
    <div class="splash-text">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø®Ø¯Ù…Ø§Øª Ø¨Ø´ØªÙŠÙ„</div>
  </div>

  <div class="mobile-view" id="mobileView">
    <div class="mobile-header">
      <h1>ğŸ” Ø¯Ù„ÙŠÙ„ Ø®Ø¯Ù…Ø§Øª Ø¨Ø´ØªÙŠÙ„</h1>
      <div class="mobile-header-buttons">
        <button class="mobile-btn-header mobile-btn-search" onclick="goToSearch()">ğŸ” Ø¨Ø­Ø« Ø¬Ø¯ÙŠØ¯</button>
        <a href="https://mostafaezat-afk.github.io/mymap/re.html" class="mobile-btn-header mobile-btn-register">âœï¸ Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø·</a>
      </div>
    </div>
    <div class="mobile-content">
      <div class="mobile-loading hidden" id="mobileLoading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</div>
      <div class="mobile-error hidden" id="mobileError"></div>
      <div id="mobileResultsSection" class="hidden">
        <div class="mobile-results-container" id="mobileResults"></div>
      </div>
      <div id="mobileSearchSection">
        <div class="mobile-section">
          <div class="mobile-section-title"><div class="mobile-icon">ğŸ”</div>Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
          <p class="mobile-info-text">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</p>
          <div class="mobile-filter-grid" id="mobileFilterGrid"></div>
        </div>
        <div class="mobile-section"><div id="mobileActivitiesContainer"></div></div>
      </div>
    </div>
    <div class="mobile-fullscreen" id="mobileFullscreen">
      <button class="mobile-close-btn" id="mobileCloseBtn">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
      <div id="mobileMap" class="mobile-fullscreen-map"></div>
    </div>
  </div>

  <div class="desktop-view" id="desktopView">
    <div class="desktop-container">
      <div class="desktop-header">
        <h1>ğŸ” Ø¯Ù„ÙŠÙ„ Ø®Ø¯Ù…Ø§Øª Ø¨Ø´ØªÙŠÙ„</h1>
        <div class="desktop-header-buttons">
          <button class="desktop-btn-header desktop-btn-search" onclick="goToSearch()">ğŸ” Ø¨Ø­Ø« Ø¬Ø¯ÙŠØ¯</button>
          <a href="https://mostafaezat-afk.github.io/mymap/re.html" class="desktop-btn-header desktop-btn-register">âœï¸ Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø·</a>
        </div>
      </div>
      <div class="desktop-loading hidden" id="desktopLoading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</div>
      <div class="desktop-error hidden" id="desktopError"></div>
      <div class="desktop-content">
        <div class="desktop-main">
          <div class="desktop-section">
            <div class="desktop-section-title"><div class="desktop-icon">ğŸ”</div>Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
            <p class="desktop-info-text">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ø¨Ø­Ø«</p>
            <div class="desktop-filter-grid" id="desktopFilterGrid"></div>
          </div>
          <div class="desktop-section"><div id="desktopActivitiesContainer"></div></div>
          <div class="desktop-section"><div class="desktop-results-container" id="desktopResults"></div></div>
        </div>
        <div class="desktop-sidebar">
          <div class="desktop-map-box">
            <h3>ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</h3>
            <div class="desktop-map-container"><div id="desktopMap"></div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const categories=[{id:"all",icon:"ğŸŒŸ",label:"Ø§Ù„ÙƒÙ„"},{id:"food",icon:"ğŸ½ï¸",label:"Ù…Ø£ÙƒÙˆÙ„Ø§Øª"},{id:"grocery",icon:"ğŸ›’",label:"Ø¨Ù‚Ø§Ù„Ø©"},{id:"services",icon:"ğŸ”§",label:"Ø®Ø¯Ù…Ø§Øª"},{id:"shops",icon:"ğŸª",label:"Ù…Ø­Ù„Ø§Øª"},{id:"medical",icon:"âš•ï¸",label:"Ø·Ø¨ÙŠ"},{id:"general",icon:"ğŸ“Œ",label:"Ø¹Ø§Ù…"}];
    
    const activities={food:[{name:"ÙƒØ´Ø±ÙŠ",icon:"ğŸ²"},{name:"ÙƒØ¨Ø§Ø¨Ø¬ÙŠ ÙˆÙ…Ø´ÙˆÙŠØ§Øª",icon:"ğŸ–"},{name:"ÙØ±Ø§Ø±Ø¬ÙŠ",icon:"ğŸ—"},{name:"Ù…Ø­Ù„ ÙÙˆÙ„ ÙˆØ·Ø¹Ù…ÙŠØ©",icon:"ğŸ§†"},{name:"Ù…Ø­Ù„ Ø£Ø³Ù…Ø§Ùƒ",icon:"ğŸŸ"},{name:"Ø¨ÙŠØªØ²Ø§ ÙˆÙƒØ±ÙŠØ¨",icon:"ğŸ•"},{name:"Ø­Ù„ÙˆØ§Ù†ÙŠ",icon:"ğŸ‚"},{name:"ÙƒØ§ÙØªÙŠØ±ÙŠØ§ ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª",icon:"â˜•"},{name:"Ø¹ØµÙŠØ±",icon:"ğŸ¹"}],grocery:[{name:"Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª",icon:"ğŸ›’"},{name:"Ø®Ø¶Ø±ÙˆØ§Øª ÙˆÙØ§ÙƒÙ‡Ø©",icon:"ğŸ"},{name:"Ø¬Ø²Ø§Ø±",icon:"ğŸ¥©"},{name:"Ù…Ø®Ø¨Ø² Ø¹ÙŠØ´",icon:"ğŸ"},{name:"ÙØ±Ù† Ø¥ÙØ±Ù†Ø¬ÙŠ",icon:"ğŸ¥"},{name:"Ø¹Ø·Ø§Ø±Ø©",icon:"ğŸ¯"},{name:"ØªÙ…ÙˆÙŠÙ†",icon:"ğŸª"},{name:"Ø£Ù„Ø¨Ø§Ù†",icon:"ğŸ¥›"}],services:[{name:"Ø³Ø¨Ø§Ùƒ",icon:"ğŸ”§"},{name:"ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ",icon:"âš¡"},{name:"ØµÙŠØ§Ù†Ø© Ø£Ø¬Ù‡Ø²Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©",icon:"ğŸ”Œ"},{name:"ØµÙŠØ§Ù†Ø© Ø³Ø®Ø§Ù†Ø§Øª",icon:"ğŸ”¥"},{name:"ØµÙŠØ§Ù†Ø© Ù…ÙˆØ§ØªÙŠØ± Ù…ÙŠØ§Ù‡",icon:"ğŸš°"},{name:"ØµÙŠØ§Ù†Ø© ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙˆÙ…Ø­Ù…ÙˆÙ„",icon:"ğŸ’»"},{name:"Ù†Ø¬Ø§Ø±",icon:"ğŸ› ï¸"},{name:"Ù†Ù‚Ø§Ø´",icon:"ğŸ¨"},{name:"Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ Ø³ÙŠØ§Ø±Ø§Øª",icon:"ğŸš—"},{name:"ÙÙ†ÙŠ Ø¯Ø´ ÙˆØ³ØªØ§Ù„Ø§ÙŠØª",icon:"ğŸ“¡"},{name:"ÙÙ†ÙŠ ØªÙƒÙŠÙŠÙØ§Øª",icon:"â„ï¸"},{name:"Ø­Ø¯Ø§Ø¯",icon:"ğŸ”¨"}],shops:[{name:"Ù…Ù„Ø§Ø¨Ø³",icon:"ğŸ‘•"},{name:"Ù…Ø­Ù„Ø§Øª Ù…Ø­Ù…ÙˆÙ„",icon:"ğŸ“±"},{name:"Ù…ÙƒØªØ¨Ø© ÙˆØ£Ø¯ÙˆØ§Øª Ù…Ø¯Ø±Ø³ÙŠØ©",icon:"ğŸ“š"},{name:"Ø­Ø¯Ø§ÙŠØ¯ ÙˆØ¨ÙˆÙŠØ§Øª",icon:"ğŸ "},{name:"Ø¬ÙˆØ§Ù‡Ø±Ø¬ÙŠ",icon:"ğŸ’"},{name:"Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©",icon:"ğŸ§¹"},{name:"Ù…Ù†Ø¸ÙØ§Øª ÙˆÙˆØ±Ù‚ÙŠØ§Øª",icon:"ğŸ§¼"},{name:"Ø£Ø­Ø°ÙŠØ© ÙˆØ´Ù†Ø·",icon:"ğŸ‘Ÿ"},{name:"Ù…ÙØ±ÙˆØ´Ø§Øª",icon:"ğŸ›ï¸"},{name:"ÙƒÙˆØ§ÙÙŠØ± Ø­Ø±ÙŠÙ…ÙŠ",icon:"ğŸ’‡"},{name:"ÙƒÙˆØ§ÙÙŠØ± Ø±Ø¬Ø§Ù„ÙŠ",icon:"ğŸ’‡â€â™‚ï¸"},{name:"Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„ ÙˆÙ‡Ø¯Ø§ÙŠØ§",icon:"ğŸ’„"},{name:"Ù„Ø¹Ø¨ Ø£Ø·ÙØ§Ù„",icon:"ğŸ§¸"}],medical:[{name:"Ø¨Ø§Ø·Ù†Ø©",icon:"ğŸ©º"},{name:"Ù‚Ù„Ø¨",icon:"â¤ï¸"},{name:"Ø£Ø·ÙØ§Ù„",icon:"ğŸ‘¶"},{name:"Ø¹Ø¸Ø§Ù…",icon:"ğŸ¦´"},{name:"Ø£Ù†Ù ÙˆØ£Ø°Ù† ÙˆØ­Ù†Ø¬Ø±Ø©",icon:"ğŸ‘‚"},{name:"Ù†Ø³Ø§Ø¡ ÙˆØªÙˆÙ„ÙŠØ¯",icon:"ğŸ¤°"},{name:"Ø¹ÙŠÙˆÙ†",icon:"ğŸ‘ï¸"},{name:"Ø¬Ù„Ø¯ÙŠØ©",icon:"ğŸ’…"},{name:"Ø£Ø³Ù†Ø§Ù†",icon:"ğŸ¦·"},{name:"Ù…Ø® ÙˆØ£Ø¹ØµØ§Ø¨",icon:"ğŸ§ "},{name:"Ù…Ø³Ø§Ù„Ùƒ Ø¨ÙˆÙ„ÙŠØ©",icon:"ğŸ©¸"},{name:"Ø¹Ù„Ø§Ø¬ Ø·Ø¨ÙŠØ¹ÙŠ",icon:"ğŸ’ª"},{name:"Ø¬Ø±Ø§Ø­Ø© Ø¹Ø§Ù…Ø©",icon:"ğŸ’‰"},{name:"Ù†ÙØ³ÙŠØ© ÙˆØ¹ØµØ¨ÙŠØ©",icon:"ğŸ’­"},{name:"ØµØ¯Ø±",icon:"ğŸ«"},{name:"ØªØºØ°ÙŠØ© Ø¹Ù„Ø§Ø¬ÙŠØ©",icon:"ğŸ¥—"},{name:"Ø³ÙƒØ± ÙˆØºØ¯Ø¯ ØµÙ…Ø§Ø¡",icon:"ğŸ’Š"},{name:"Ø°ÙƒÙˆØ±Ø© ÙˆØ¹Ù‚Ù…",icon:"ğŸ§ª"},{name:"Ø³Ù…Ø¹ÙŠØ§Øª",icon:"ğŸ¦»"},{name:"ØªØ®Ø§Ø·Ø¨",icon:"ğŸ’¬"},{name:"ØµÙŠØ¯Ù„ÙŠØ©",icon:"ğŸ’Š"},{name:"Ù…Ø¹Ù…Ù„ ØªØ­Ø§Ù„ÙŠÙ„",icon:"ğŸ”¬"},{name:"Ù…Ø±ÙƒØ² Ø£Ø´Ø¹Ø©",icon:"ğŸ©»"},{name:"Ø¹ÙŠØ§Ø¯Ø© Ø¨ÙŠØ·Ø±ÙŠØ©",icon:"ğŸ•"}],general:[{name:"Ø®Ø¯Ù…Ø§Øª ØªÙˆØµÙŠÙ„",icon:"ğŸšš"},{name:"Ù…Ø¯Ø±Ø³Ø©",icon:"ğŸ«"},{name:"Ù…Ø±Ø§ÙƒØ² ØªÙ‚ÙˆÙŠØ©",icon:"ğŸ“"},{name:"Ù…Ø­Ø§Ù…ÙŠ",icon:"âš–ï¸"},{name:"Ø³Ù…Ø³Ø§Ø±",icon:"ğŸ¢"},{name:"Ø¹Ù‚Ø§Ø±Ø§Øª",icon:"ğŸ¡"},{name:"Ø¨Ù„Ø§ÙŠ Ø³ØªÙŠØ´Ù†",icon:"ğŸ®"},{name:"Ø³Ù†ØªØ±Ø§Ù„",icon:"â˜ï¸"},{name:"Ù…Ø¤Ø³Ø³Ø§Øª Ø­ÙƒÙˆÙ…ÙŠØ©",icon:"ğŸ›ï¸"},{name:"Ù…ØºØ³Ù„Ø©",icon:"ğŸ‘•"},{name:"Ø­Ø¶Ø§Ù†Ø© Ø£Ø·ÙØ§Ù„",icon:"ğŸ¼"},{name:"Ø¥ÙŠØ¬Ø§Ø± Ø³ÙŠØ§Ø±Ø§Øª",icon:"ğŸš™"},{name:"Ø¬ÙŠÙ…",icon:"ğŸ‹ï¸"},{name:"Ø³Ø§ÙŠØ¨Ø± Ù†Øª",icon:"ğŸ–¥ï¸"}]};

    let selectedCategory='all';let mobileMap,desktopMap;let markers=[];let infoWindows=[];const deviceType=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768?'mobile':'desktop';

    function resetSearch(){selectedCategory='all';markers.forEach(m=>{if(m.marker)m.marker.setMap(null)});markers=[];infoWindows=[];if(deviceType==='mobile'){document.getElementById('mobileResultsSection').classList.add('hidden');document.getElementById('mobileSearchSection').classList.remove('hidden');document.getElementById('mobileResults').innerHTML='';loadFilters('mobile');loadActivities('mobile','all')}else{document.getElementById('desktopResults').innerHTML='';loadFilters('desktop');loadActivities('desktop','all')}}

    document.addEventListener('DOMContentLoaded',function(){if(deviceType==='mobile'){document.getElementById('mobileView').classList.add('active');setupMobileView()}else{document.getElementById('desktopView').classList.add('active');setupDesktopView()}});

    function setupMobileView(){loadFilters('mobile');loadActivities('mobile','all');document.getElementById('mobileCloseBtn').addEventListener('click',()=>{document.getElementById('mobileFullscreen').classList.remove('active')})}

    function setupDesktopView(){loadFilters('desktop');loadActivities('desktop','all')}

    function loadFilters(view){const grid=view==='mobile'?document.getElementById('mobileFilterGrid'):document.getElementById('desktopFilterGrid');grid.innerHTML='';categories.forEach(cat=>{const card=document.createElement('div');card.className=view==='mobile'?'mobile-filter-card':'desktop-filter-card';if(cat.id===selectedCategory)card.classList.add('selected');card.innerHTML=`<div class="${view}-filter-icon">${cat.icon}</div><div class="${view}-filter-label">${cat.label}</div>`;card.onclick=()=>selectFilter(cat.id,card,view);grid.appendChild(card)})}

    function selectFilter(catId,element,view){selectedCategory=catId;const prefix=view==='mobile'?'mobile':'desktop';const grid=document.getElementById(`${prefix}FilterGrid`);grid.querySelectorAll(`.${prefix}-filter-card`).forEach(c=>c.classList.remove('selected'));element.classList.add('selected');loadActivities(view,catId)}

    function loadActivities(view,filter){const container=view==='mobile'?document.getElementById('mobileActivitiesContainer'):document.getElementById('desktopActivitiesContainer');container.innerHTML='';Object.entries(activities).forEach(([cat,acts])=>{if(filter!=='all'&&filter!==cat)return;const section=document.createElement('div');section.className=view==='mobile'?'mobile-section':'desktop-section';const sectionTitle=document.createElement('div');sectionTitle.className=view==='mobile'?'mobile-section-title':'desktop-section-title';const catData=categories.find(c=>c.id===cat);sectionTitle.innerHTML=view==='mobile'?`<div class="mobile-icon">${catData.icon}</div>${catData.label}`:`<div class="desktop-icon">${catData.icon}</div>${catData.label}`;section.appendChild(sectionTitle);const activityGrid=document.createElement('div');activityGrid.className=view==='mobile'?'mobile-activity-grid':'desktop-activity-grid';acts.forEach(act=>{const card=document.createElement('div');card.className=view==='mobile'?'mobile-activity-card':'desktop-activity-card';card.innerHTML=`<div class="${view}-activity-icon">${act.icon}</div><div class="${view}-activity-label">${act.name}</div>`;card.onclick=()=>searchActivity(act.name,view);activityGrid.appendChild(card)});section.appendChild(activityGrid);container.appendChild(section)})}

    function searchActivity(activityName,view){const prefix=view==='mobile'?'mobile':'desktop';document.getElementById(`${prefix}Error`).classList.add('hidden');document.getElementById(`${prefix}Loading`).classList.remove('hidden');if(view==='mobile'){document.getElementById('mobileSearchSection').classList.add('hidden')}fetch(`${CONFIG.WEB_APP_URL}?action=getProvidersByActivity&activity=${encodeURIComponent(activityName)}`).then(response=>response.json()).then(data=>{showResults(data,activityName,view)}).catch(error=>{document.getElementById(`${prefix}Error`).textContent="âŒ Ø®Ø·Ø£: "+error.message;document.getElementById(`${prefix}Error`).classList.remove('hidden');document.getElementById(`${prefix}Loading`).classList.add('hidden')})}

    function showResults(providers,activityName,view){const prefix=view==='mobile'?'mobile':'desktop';document.getElementById(`${prefix}Loading`).classList.add('hidden');const resultsDiv=document.getElementById(`${prefix}Results`);resultsDiv.innerHTML='';if(view==='mobile'){document.getElementById('mobileResultsSection').classList.remove('hidden')}markers.forEach(m=>{if(m.marker)m.marker.setMap(null)});markers=[];infoWindows=[];if(!providers||providers.length===0){resultsDiv.innerHTML=`<div class="${prefix}-no-results">âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ù†Ø´Ø§Ø·: <strong>${activityName}</strong></div>`;return}providers.forEach((p,index)=>{const card=document.createElement('div');card.className=view==='mobile'?'mobile-result-card':'desktop-result-card';card.innerHTML=`<div class="${prefix}-result-title">${p.name}</div><div class="${prefix}-result-info">ğŸ› ï¸ ${p.activity}</div><div class="${prefix}-result-info">ğŸ“ Ø§Ø¶ØºØ· Ù„Ù„Ø§ØªØµØ§Ù„: <a href="tel:${p.phone}">${p.phone}</a></div><div class="${prefix}-result-info">ğŸ“ ${p.address}</div><div class="${prefix}-result-info">ğŸ•’ ${p.time||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div><button class="${prefix}-map-btn" onclick="viewOnMap(${index},'${view}')">ğŸ—ºï¸ Ø´Ø§Ù‡Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>`;resultsDiv.appendChild(card)});addMarkers(providers,view);centerMap(providers,view)}

    function addMarkers(providers,view){const map=view==='mobile'?mobileMap:desktopMap;providers.forEach((p,index)=>{const marker=new google.maps.Marker({position:{lat:p.lat,lng:p.lng},map:map,title:p.name,label:{text:p.name,color:'#FFFFFF',fontSize:'13px',fontWeight:'bold'}});const infoContent=`<div style="font-family:Tajawal,sans-serif;direction:rtl;padding:20px 10px;max-width:90vw;min-width:60vw;"><div style="font-size:2.4rem;font-weight:800;color:#1976d2;">${p.name}</div><div style="margin:12px 0;font-size:1.8rem;color:black;">ğŸ› ï¸ ${p.activity}</div><div style="margin:8px 0;font-size:1.65rem;">ğŸ“ <span style="color:#2196f3;font-weight:bold;">Ø§Ø¶ØºØ· Ù„Ù„Ø§ØªØµØ§Ù„: <a href="tel:${p.phone}" style="color:#2196f3;text-decoration:none">${p.phone}</a></span></div><div style="margin:8px 0;font-size:1.5rem;">ğŸ“ ${p.address}</div><div style="margin:6px 0;font-size:1.4rem;">ğŸ•’ ${p.time||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div></div>`;const infoWindow=new google.maps.InfoWindow({content:infoContent,maxWidth:900});marker.addListener("click",function(){infoWindows.forEach(iw=>iw.close());map.setCenter(marker.getPosition());map.setZoom(20);infoWindow.open(map,marker)});markers.push({marker});infoWindows.push(infoWindow)})}

    function centerMap(providers,view){const map=view==='mobile'?mobileMap:desktopMap;if(providers.length>0){const bounds=new google.maps.LatLngBounds();providers.forEach(p=>bounds.extend(new google.maps.LatLng(p.lat,p.lng)));map.fitBounds(bounds);if(providers.length===1)map.setZoom(17)}}

    function viewOnMap(index,view){if(markers&&markers[index]){const map=view==='mobile'?mobileMap:desktopMap;if(view==='mobile'){document.getElementById('mobileFullscreen').classList.add('active');setTimeout(function(){google.maps.event.trigger(map,'resize');google.maps.event.trigger(markers[index].marker,'click')},300)}else{google.maps.event.trigger(markers[index].marker,'click');document.querySelector('.desktop-map-box').scrollIntoView({behavior:'smooth'})}}}

    function initMap(){const beshtil={lat:30.0856171,lng:31.1819895};const bounds=new google.maps.LatLngBounds(new google.maps.LatLng(30.065,31.160),new google.maps.LatLng(30.105,31.205));const mapOptions={center:beshtil,zoom:16,minZoom:13,maxZoom:21,mapTypeId:google.maps.MapTypeId.HYBRID,restriction:{latLngBounds:bounds,strictBounds:true},gestureHandling:'greedy',zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:false,streetViewControl:true,fullscreenControl:false,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]}]};if(deviceType==='mobile'){mobileMap=new google.maps.Map(document.getElementById("mobileMap"),mapOptions)}else{desktopMap=new google.maps.Map(document.getElementById("desktopMap"),mapOptions)}}

    window.addEventListener('load',function(){setTimeout(function(){const splash=document.getElementById('splashScreen');if(splash)splash.classList.add('hidden')},1500);if(typeof google!=='undefined'&&google.maps){initMap()}else{setTimeout(initMap,1000)}});
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBT2qu6ecTsP-5xCs6lKuj_OO4UtqOFaJ8&callback=initMap&language=ar&region=EG" async defer></script>
</body>
</html>
